# Video Downloader Bot

Бот для скачивания видео с YouTube и TikTok. Поддерживает как интерфейс Telegram, так и командную строку.

## Содержание

- [Быстрая установка](#быстрая-установка)
- [Установка](#установка)
- [Настройка](#настройка)
- [Запуск](#запуск)
- [Использование](#использование)
- [Примеры](#примеры)
- [Возможные проблемы и их решения](#возможные-проблемы-и-их-решения)
- [Требования](#требования)

## Быстрая установка

1. Установите Python 3.10 или 3.11 (если еще не установлен)
2. Скачайте или клонируйте репозиторий
3. Откройте командную строку в папке с проектом
4. Выполните команду:
   ```
   python setup.py
   ```

## Установка

### Вариант 1: Клонирование репозитория

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/download-video-bot.git
cd download-video-bot
```

2. Запустите скрипт установки:
```bash
python setup.py
```

Это установит все необходимые зависимости и создаст нужные директории.

### Вариант 2: Скачивание ZIP-архива

1. Скачайте ZIP-архив репозитория, нажав на кнопку "Code" и выбрав "Download ZIP"
2. Распакуйте архив в удобное место
3. Откройте командную строку в распакованной директории
4. Запустите скрипт установки:
```bash
python setup.py
```

## Настройка

### Настройка Telegram бота

1. Получите токен для вашего бота у [@BotFather](https://t.me/BotFather) в Telegram:
   - Откройте Telegram и найдите @BotFather
   - Отправьте команду `/newbot`
   - Следуйте инструкциям для создания нового бота
   - После создания бота вы получите токен

2. Откройте файл `config.py` в любом текстовом редакторе
3. Замените значение `TELEGRAM_TOKEN` на ваш токен:
```python
TELEGRAM_TOKEN = "ваш_токен_здесь"  # Замените на ваш токен от BotFather
```

### Настройка параметров загрузки

В файле `config.py` вы также можете настроить другие параметры:

- `DOWNLOAD_DIR` - директория для сохранения скачанных видео
- `YOUTUBE_QUALITY` - качество скачиваемых видео с YouTube ("best" для наилучшего качества)
- `TIKTOK_USER_AGENT` - User-Agent для запросов к TikTok

## Запуск

### Telegram бот
```bash
python telegram_bot.py
```

### Версия для командной строки
```bash
python bot.py
```

## Использование

### Telegram Bot

1. Запустите бота:
```bash
python telegram_bot.py
```

2. Найдите своего бота в Telegram по имени, которое вы указали при создании
3. Отправьте боту команду `/start` для начала работы
4. Отправьте боту ссылку на видео с YouTube или TikTok
5. Бот скачает видео и отправит его вам

**Поддерживаемые команды:**
- `/start` - Начать работу с ботом
- `/help` - Показать справку

### Командная строка

Если вы предпочитаете использовать командную строку или у вас возникли проблемы с Telegram ботом:

1. Запустите CLI-версию бота:
```bash
python bot.py
```

2. Выберите опцию из меню:
   - `1` - Скачать видео с YouTube
   - `2` - Скачать видео с TikTok
   - `3` - Выход

3. Вставьте ссылку на видео и нажмите Enter
4. Видео будет скачано в папку `downloads`

## Примеры

### Примеры ссылок YouTube

Бот поддерживает различные форматы ссылок YouTube:

1. Стандартные ссылки:
   ```
   https://www.youtube.com/watch?v=dQw4w9WgXcQ
   ```

2. Сокращенные ссылки:
   ```
   https://youtu.be/dQw4w9WgXcQ
   ```

3. Ссылки с временной меткой (будет скачано полное видео):
   ```
   https://www.youtube.com/watch?v=dQw4w9WgXcQ&t=42s
   ```

4. Ссылки с плейлистами (будет скачано только указанное видео):
   ```
   https://www.youtube.com/watch?v=dQw4w9WgXcQ&list=PLxxx
   ```

### Примеры ссылок TikTok

Бот поддерживает различные форматы ссылок TikTok:

1. Стандартные ссылки:
   ```
   https://www.tiktok.com/@username/video/1234567890123456789
   ```

2. Сокращенные ссылки:
   ```
   https://vm.tiktok.com/ABCDEF/
   ```

### Примеры использования в Telegram

1. Отправьте команду `/start` для начала работы с ботом
2. Отправьте ссылку на видео:
   ```
   https://www.youtube.com/watch?v=dQw4w9WgXcQ
   ```
3. Бот скачает видео и отправит его вам

### Примеры использования в командной строке

1. Запустите бота:
   ```
   python bot.py
   ```

2. Для скачивания видео с YouTube:
   - Введите `1` и нажмите Enter
   - Вставьте ссылку на YouTube видео и нажмите Enter
   - Видео будет скачано в папку `downloads`

3. Для скачивания видео с TikTok:
   - Введите `2` и нажмите Enter
   - Вставьте ссылку на TikTok видео и нажмите Enter
   - Видео будет скачано в папку `downloads`

4. Для выхода из программы:
   - Введите `3` и нажмите Enter

## Возможные проблемы и их решения

### Не удалось скачать видео

Если вы получаете ошибку "Не удалось скачать видео. Пожалуйста, проверьте ссылку и попробуйте снова.", возможные причины:

#### YouTube

- **Неверная или недействительная ссылка**
  - Убедитесь, что ссылка начинается с `https://www.youtube.com/watch?v=` или `https://youtu.be/`
  - Проверьте, что в ссылке нет опечаток

- **Видео недоступно**
  - Видео может быть приватным или удаленным
  - Видео может иметь ограничение по возрасту
  - Видео может быть недоступно в вашем регионе

- **Проблемы с подключением**
  - Проверьте ваше интернет-соединение
  - Попробуйте использовать VPN, если YouTube заблокирован в вашем регионе

#### TikTok

- **Неверная или недействительная ссылка**
  - Убедитесь, что ссылка начинается с `https://www.tiktok.com/` или `https://vm.tiktok.com/`
  - Проверьте, что в ссылке нет опечаток

- **Видео недоступно**
  - Видео может быть приватным или удаленным
  - Аккаунт автора может быть закрытым

- **TikTok изменил структуру страницы**
  - TikTok часто меняет структуру своего сайта, что может привести к ошибкам при скачивании
  - Попробуйте обновить бота до последней версии

- **Видео защищено от скачивания**
  - Некоторые видео на TikTok могут быть защищены от скачивания

### Проблемы с Telegram ботом

Если у вас возникают проблемы с запуском Telegram бота, особенно с ошибкой "отсутствия модуля 'imghdr'", это может быть связано с использованием Python 3.13, в котором этот модуль был удален. Решения:

1. Используйте Python 3.10 или 3.11
   ```bash
   # Установите Python 3.11 и создайте виртуальное окружение
   python3.11 -m venv venv
   # Активируйте виртуальное окружение
   # На Windows:
   venv\Scripts\activate
   # На Linux/Mac:
   source venv/bin/activate
   # Установите зависимости
   python setup.py
   ```

2. Используйте CLI версию бота:
   ```bash
   python bot.py
   ```

### Примеры ошибок и их решения

1. "Не удалось скачать видео. Пожалуйста, проверьте ссылку и попробуйте снова."
   - Убедитесь, что ссылка корректна и не содержит опечаток
   - Проверьте, доступно ли видео (не приватное, не удалено)
   - Попробуйте открыть ссылку в браузере, чтобы убедиться, что видео доступно

2. "Произошла ошибка при скачивании видео. Пожалуйста, попробуйте позже."
   - Возможно, сервер YouTube или TikTok временно недоступен
   - Проверьте ваше интернет-соединение
   - Попробуйте скачать видео позже

3. "Не удалось запустить Telegram бота из-за отсутствия модуля 'imghdr'."
   - Используйте Python 3.10 или 3.11 вместо Python 3.13
   - Или используйте CLI версию бота: `python bot.py`

## Требования

- Python 3.7+ (рекомендуется Python 3.10 или 3.11)
- pytube
- requests
- python-telegram-bot (для Telegram бота)
- uuid

